<div *ngIf="myRol != ClienteVista()">

    <div>


        <div class="navprincipal">
            <app-sidebar></app-sidebar>
        </div>
        <div class="contenidoprincipal  animate__animated animate__fadeIn">
            <div class="principal">
                <div class="estatic">
                    <app-sidebarpanelhistorial></app-sidebarpanelhistorial>
                </div>
                <div class="cont" *ngIf="false">
                    <button type="button" class="conteo" (click)="changeView()">Conteo</button>
                    <!-- conteogeneral -->
                    <div class="table-responsive" *ngIf="conteo">
                        <div class="card text-center"
                            style="background: rgb(255,255,255); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
                            #screen>
                            <div class="card-body">
                                <h4> &bull;Conteo&bull;</h4>
                                <h4>&mdash;&mdash;</h4>



                                <!-- <h5 class="card-title" style="text-transform: uppercase;">{{ CiberSelect }}</h5> -->
                                <div class="d-flex justify-content-center">
                                    <div class="table table-striped">
                                        <thead class="myheaders">

                                            <tr style="border-radius: 1rem !important; ">

                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                                    nacimiento</th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                                    Defunción</th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                                    Matrimonio</th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">Acta de
                                                    Divorcio</th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">Semanas
                                                    cotizadas</th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">NSS
                                                </th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">RFC
                                                </th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">
                                                    Constacia
                                                    de
                                                    derechos
                                                </th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%); color: #000;">
                                                    Constacia
                                                    de
                                                    Inhabilitación
                                                </th>
                                                <th scope="col"
                                                    style="background-color:rgba(150,150,253,90%);  color: #000; width: 8rem; ">
                                                    Total de actas</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr style="cursor: pointer;">
                                                <td style=" color: #000; font-size:1.2em; ">{{conteo_nacimiento}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_defuncion}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_matrimonio}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_divorcio}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_cot}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_nss}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_rfc}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_der}} </td>
                                                <td style=" color: #000; font-size:1.2em;">{{conteo_inh}} </td>
                                                <td style=" background-color: #f2b0e0; color: #000; font-size:1.2em;">
                                                    {{conteo_total}} </td>
                                            </tr>
                                        </tbody>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- findetabla -->


                </div>



                <div class="contenedor" *ngIf="valordelobservable != 'Elige un corte'"
                    style="margin-top: 1rem; z-index: -1;">
                    <div class="row row-cols-auto">

                        <div class="col col-4 text-center panel-cibers"
                            style=" height: 37rem; border-radius: 0.25rem; background-color: rgb(58, 56, 56); width: 25rem;">
                            <div class="badge text-wrap"
                                style="width: 10rem; margin-right: 1rem; height: 2rem; background-color: #98f6a9; color: #000; margin-top: 1em;">
                                <span style="vertical-align: middle;">Filtro: </span>
                            </div>
                            <div class="dropdown align-middle" style="margin-top: 1em;">
                                <div class="row">
                                    <div class="col">
                                        <button class="btn btn-secondary dropdown-toggle" type="button"
                                            id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                                            {{ fechaDeUsuarioSeleccionada || "Selecciona las fechas a buscar"}}
                                        </button>
    
                                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                                            <li><a class="dropdown-item" style="cursor: pointer;"
                                                    *ngFor="let fechas of fechasParaBuscarClientes"
                                                    (click)="getClientsByDateSelected(fechas.corte)">{{ fechas.corte ||
                                                    "Actual"}}</a></li>
                                        </ul>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-success" (click)="exportExcel()">Exportar Excel</button>
                                    </div>
                                </div>
                            </div>


                            <div class="input-group" style="margin-top: 1em;">
                                <input type="text" class="form-control" placeholder="Buscar" [(ngModel)]="ciberSearch"
                                    name="ciberSearch">
                            </div>


                            <ul class="list-group" style="margin-top: 1rem; margin-bottom: 1rem;">
                                <li class="list-group-item active" aria-current="true"
                                    style="text-align: center; background: linear-gradient(0, rgb(36, 133, 163) 0%, rgba(34,165,223,1) 100%);">
                                    CIBERS </li>

                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item d-flex justify-content-between align-items-start"
                                        style="cursor: pointer;"
                                        *ngFor="let ciber of usuariosEnFecha |  buscarciber: ciberSearch"
                                        (click)="getCorte(ciber.id, ciber.nombre)">
                                        <div class="ms-2 me-auto">
                                            <button class="button phone" *ngIf="CiberSelect!=ciber.nombre">{{
                                                ciber.nombre }}</button>
                                            <button class="select" *ngIf="CiberSelect===ciber.nombre">{{ ciber.nombre
                                                }}</button>
                                            <!-- <button type="button" class="list-group-item list-group-item-action">{{ ciber.nombre }}</button> -->
                                            <!-- <div  class=" list-group-item-action">{{ ciber.nombre }}</div>  -->
                                        </div>
                                    </li>
                                </ol>

                            </ul>
                        </div>

                        <div class="col col-8 text-center" *ngIf="CiberSelect.length == 0">
                            <div class="card" style="height: 37em; background-color: rgb(243, 243, 243);">
                                <div class="card-body">
                                    <h5 class="card-title" style="margin-top: 18.5rem; font-size: 2rem;">SELECCIONA UN
                                        CIBER</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">Para visualizar detalles debes de
                                        seleccionar el ciber/cliente primero.</h6>
                                </div>
                            </div>
                        </div>

                        <div class="col col-8 text-center" *ngIf="CiberSelect.length != 0">
                            <div class="card text-center" *ngIf="false">
                                <div class="card-body">
                                    <h4>&bull;Selecciona la fecha de corte&bull;</h4>
                                    <h4>&mdash;&mdash;</h4>
                                    <div class="dropdown">
                                        <a class="btn btn-secondary dropdown-toggle" href="#"
                                            style="background-color: rgb(0, 0, 0);" role="button" id="dropdownMenuLink"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                            {{ corteSeleccionado }}
                                        </a>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">

                                            <li *ngFor="let fecha of fechas; let indexof = index"
                                                style="cursor: pointer;">
                                                <a class="dropdown-item" (click)="setCorte(fechas[indexof].corte)">{{
                                                    fechas[indexof].corte}}</a>
                                            </li>
                                            <li style="cursor: pointer;">
                                                <a class="dropdown-item" (click)="setCorte('Actual')">Actual</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div id="excel-table" class="card text-center"
                                style="background: rgb(255,255,255); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
                                #screen>
                                <div class="card-body">
                                    <h5 class="card-title"
                                        style="text-transform: uppercase; background-color: #98f6a9;">{{ CiberSelect }}
                                    </h5>

                                    <div class="table table-striped table-responsive" *ngIf="paginacion == false"
                                        style="width: 100%;">
                                        <thead class="myheaders">
                                            <tr style="border-radius: 1rem !important;">

                                                <th scope="col" style="border-radius: 0.5rem 0 0 0.5rem;">#</th>
                                                <th scope="col">Documento</th>
                                                <th scope="col">Fecha</th>

                                                <!-- <th scope="col">Hora de descarga</th> -->
                                                <th scope="col">Estado</th>
                                                <th scope="col">Nombre (Acta)</th>
                                                <th scope="col">CURP</th>

                                                <th scope="col" style=" border-radius: 0 0.5rem 0.5rem 0;">
                                                    Precio</th>
                                                <th *ngIf="excel" scope="col">Ciber</th>
                                                <th *ngIf="excel" scope="col">Asesor</th>
                                                <th *ngIf="excel" scope="col">Cargado por</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let acta of corteDelUsuario;  let infexof = index; "
                                                style="cursor: pointer;">
                                                <th scope="row" style="width: 3em !important;">{{ infexof + 1 }}</th>
                                                <td
                                                    style=" font-size:1.0em; width: 13rem !important; height: 5rem !important;">
                                                    {{ acta.document }}</td>

                                                <td style=" font-size:1.0em; width: 8rem !important;">
                                                    {{acta.createdAt}} </td>


                                                <td style=" font-size:1.0em; width: 10rem !important;">{{ acta.state }}
                                                </td>
                                                <td style=" font-size:1.0em; width: 20rem !important;"> {{
                                                    acta.nameinside }}</td>
                                                <td style=" font-size:1.0em; width: 10rem !important;"> {{ acta.dataset
                                                    }}
                                                </td>
                                                <td style=" font-size:1.0em; width: 4rem !important;"
                                                    style="font-weight: bolder;">$ {{ acta.price }} </td>

                                                <td style=" font-size:1.0em; width: 4rem !important;"
                                                    style="font-weight: bolder;" *ngIf="excel">{{ acta.client.nombre }}
                                                </td>
                                                <td style=" font-size:1.0em; width: 4rem !important;"
                                                    style="font-weight: bolder;" *ngIf="excel">{{ acta.superviser.nombre
                                                    }} </td>
                                                <td style=" font-size:1.0em; width: 4rem !important;"
                                                    style="font-weight: bolder;" *ngIf="excel">{{ acta.uploadBy.nombre
                                                    }} </td>
                                            </tr>
                                            <tr style="cursor: pointer;">
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <th>
                                                    Total:
                                                </th>
                                                <td
                                                    style=" font-size:1.2em; background-color: #f2b0e0; font-weight: bolder;">
                                                    ${{totalPrecio}}</td>
                                            </tr>
                                        </tbody>
                                    </div>

                                    <div class="table table-striped table-responsive" style="width: 100%;"
                                        *ngIf="paginacion == true">
                                        <thead class="myheaders">
                                            <tr style="border-radius: 1rem !important;">
                                                <th scope="col" style="border-radius: 0.5rem 0 0 0.5rem;">#</th>
                                                <th scope="col">Documento</th>
                                                <th scope="col">Fecha</th>
                                                <th scope="col">Estado</th>
                                                <th scope="col">Nombre (Acta)</th>
                                                <th scope="col">CURP</th>
                                                <th scope="col" style=" border-radius: 0 0.5rem 0.5rem 0;">
                                                    Precio</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let acta of items;  let indexof = index; "
                                                style="cursor: pointer;">
                                                <th scope="row" style="width: 3em !important;">{{
                                                    indexOfItems[0][indexof] }}</th>
                                                <td
                                                    style=" font-size:1.0em; width: 13rem !important; height: 5rem !important;">
                                                    {{ acta.document }}</td>
                                                <td style=" font-size:1.0em; width: 8rem !important;">
                                                    {{acta.createdAt}}</td>
                                                <td
                                                    style=" font-size:1.0em; width: 13rem !important; height: 5rem !important;">
                                                    {{ acta.dataset }}</td>

                                                <td style=" font-size:1.0em; width: 10rem !important;">{{ acta.state }}
                                                </td>
                                                <td style=" font-size:1.0em; width: 20rem !important;"> {{
                                                    acta.nameinside }}</td>

                                                <td style=" font-size:1.0em; width: 4rem !important;"
                                                    style="font-weight: bolder;">$ {{ acta.price }} </td>
                                            </tr>
                                            <tr style="cursor: pointer;">
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <td> </td>
                                                <th>
                                                    Total:
                                                </th>
                                                <td
                                                    style=" font-size:1.2em; background-color: #f2b0e0; font-weight: bolder;">
                                                    ${{totalPrecio}}</td>
                                            </tr>
                                        </tbody>
                                    </div>

                                </div>
                                <!-- Conteo -->
                                <div class="table-responsive">
                                    <div class="card text-center"
                                        style="background: rgb(178, 64, 64); background: linear-gradient(360deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);"
                                        #screen>
                                        <div class="card-body">
                                            <h4> &bull;Conteo&bull;</h4>
                                            <h4>&mdash;&mdash;</h4>
                                            <!-- <h5 class="card-title" style="text-transform: uppercase;">{{ CiberSelect }}</h5> -->
                                            <div class="d-flex justify-content-center">
                                                <div class="table table-striped">
                                                    <thead class="myheaders">
                                                        <tr style="border-radius: 1rem !important; ">

                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Acta de
                                                                nacimiento</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Acta de
                                                                Defunción</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Acta de
                                                                Matrimonio</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Acta de
                                                                Divorcio</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Semanas
                                                                cotizadas</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                NSS</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                RFC</th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Constacia
                                                                de
                                                                derechos
                                                            </th>

                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000;">
                                                                Constacia
                                                                de
                                                                Inhabilitación
                                                            </th>
                                                            <th scope="col"
                                                                style="background-color:rgba(152,246,169,90%); color: #000; width: 8rem; ">
                                                                Total de actas</th>
                                                        </tr>

                                                    </thead>
                                                    <tbody>
                                                        <tr style="cursor: pointer;">
                                                            <td style=" color: #000; font-size:1.2em; "
                                                                *ngIf="conteo_nacimiento == 0">{{conteo_nacimiento}}
                                                            </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_nacimiento != 0">{{conteo_nacimiento}}
                                                            </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_defuncion == 0">{{conteo_defuncion}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_defuncion != 0">{{conteo_defuncion}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_matrimonio == 0">{{conteo_matrimonio}}
                                                            </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_matrimonio != 0">{{conteo_matrimonio}}
                                                            </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_divorcio == 0">{{conteo_divorcio}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_divorcio != 0">{{conteo_divorcio}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_cot == 0">{{conteo_cot}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_cot != 0">{{conteo_cot}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_nss == 0">{{conteo_nss}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_nss != 0">{{conteo_nss}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_rfc == 0">{{conteo_rfc}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_rfc != 0">{{conteo_rfc}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_der == 0">{{conteo_der}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_der != 0">{{conteo_der}} </td>

                                                            <td style=" color: #000; font-size:1.2em;"
                                                                *ngIf="conteo_inh == 0">{{conteo_inh}} </td>
                                                            <td style=" color: #000; font-size:1.2em; font-weight: bolder;"
                                                                *ngIf="conteo_inh != 0">{{conteo_inh}} </td>

                                                            <td
                                                                style=" background-color: #f2b0e0; color: #000; font-size:1.2em; font-weight: bolder;">
                                                                {{totalActas}} </td>
                                                        </tr>

                                                    </tbody>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="table table-striped table-responsive" style="width: 100%;"
                                *ngIf="paginacion == true">
                                <thead class="myheaders">
                                    <tr style="border-radius: 1rem !important;">
                                        <th scope="col" style="border-radius: 0.5rem 0 0 0.5rem;">#</th>
                                        <th scope="col">Documento</th>
                                        <th scope="col">Fecha</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Nombre (Acta)</th>
                                        <th scope="col">CURP</th>
                                        <th scope="col" style=" border-radius: 0 0.5rem 0.5rem 0;">
                                            Precio</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let acta of items;  let indexof = index; " style="cursor: pointer;">
                                        <th scope="row" style="width: 3em !important;">{{
                                            indexOfItems[0][indexof] }}</th>
                                        <td style=" font-size:1.0em; width: 13rem !important; height: 5rem !important;">
                                            {{ acta.document }}</td>
                                        <td style=" font-size:1.0em; width: 8rem !important;">
                                            {{acta.createdAt}}</td>
                                        <td style=" font-size:1.0em; width: 13rem !important; height: 5rem !important;">
                                            {{ acta.uploadby.nombre }}</td>
                                        <td style=" font-size:1.0em; width: 8rem !important;">{{ acta.createdAt
                                            | date: 'h:mm a' }} </td>
                                        <td style=" font-size:1.0em; width: 10rem !important;">{{ acta.state }}
                                        </td>
                                        <td style=" font-size:1.0em; width: 20rem !important;"> {{
                                            acta.nameinside }}</td>
                                        <td style=" font-size:1.0em; width: 10rem !important;"> {{ acta.dataset }}
                                        </td>
                                        <td style=" font-size:1.0em; width: 4rem !important;"
                                            style="font-weight: bolder;">$ {{ acta.price }} </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td> </td>
                                        <td> </td>
                                        <td> </td>
                                        <td> </td>
                                        <td> </td>
                                        <th>
                                            Total:
                                        </th>
                                        <td style=" font-size:1.2em; background-color: #f2b0e0; font-weight: bolder;">
                                            ${{totalPrecio}}</td>
                                    </tr>
                                </tbody>
                            </div>


                            <span class="btn btn-success" (click)="alert()">Descargar PNG</span>
                            <button class="btn btn-success" (click)="descargarexcelvista()" (click)="alert2()">Descargar
                                Excel</button>
                            <button class="btn btn-success" (click)="alert3()"
                                *ngIf="valordelobservable == 'ENVIADO'">Por enviar</button>
                        </div>

                    </div>
                    <div id="download">
                        <img #canvas>
                        <a #downloadLink></a>
                    </div>
                </div>
            </div>
        </div>




    </div>





</div>