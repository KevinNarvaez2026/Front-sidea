<div class="myCard animate__animated animate__fadeInUp">
  <div class="myHeader">
    <p>
      <fa-icon [icon]="faFaceGrin"></fa-icon>
      Bienvenido {{ (myData$ | async)?.username }}
    </p>
  </div>
  <div class="myBody space" *ngIf="myRol == 'Supervisor' || myRol == 'Cliente'">
    <div id="Limites">
      <div
        class="mySubCard2"
        style="background-color: rgb(1, 8, 31); color: white !important"
      >
        <div class="mySubTitle">
          <label for="mySubTitle">Actas Limite</label>
        </div>

        <div class="myContainer">
          <div class="myLegend">Limite: {{ Actas_Limite }}</div>
          <div class="dashboard" *ngIf="Actas_Limite <= 3000">
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />
              <circle class="meter-3" cx="57" cy="57" r="52" />
            </svg>
          </div>
          <div
            class="dashboard"
            *ngIf="Actas_Limite > 3000 && Actas_Limite <= 7000"
          >
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />

              <circle class="meter-2" cx="57" cy="57" r="52" />
            </svg>
          </div>
          <div
            class="dashboard"
            *ngIf="Actas_Limite > 7000 && Actas_Limite <= 10000"
          >
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />
              <circle class="meter-1" cx="57" cy="57" r="52" />
            </svg>
          </div>
        </div>
      </div>
    </div>

    <div id="Contador">
      <div
        class="mySubCard2"
        style="background-color: rgb(1, 8, 31); color: white !important"
      >
        <div class="mySubTitle">
          <label for="mySubTitle">Actas descargadas</label>
        </div>
        <div class="myContainer">
          <div class="myLegend">Contador: {{ actas_current }}</div>

          <div class="dashboard" *ngIf="actas_current <= 3000">
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />
              <circle class="meter-3" cx="57" cy="57" r="52" />
            </svg>
          </div>

          <div
            class="dashboard"
            *ngIf="actas_current > 3000 && actas_current <= 7000"
          >
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />
              <circle class="meter-2" cx="57" cy="57" r="52" />
            </svg>
          </div>

          <div
            class="dashboard"
            *ngIf="actas_current > 7000 && actas_current <= 10000"
          >
            <svg>
              <circle class="bg" cx="57" cy="57" r="52" />
              <circle class="meter-1" cx="57" cy="57" r="52" />
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="myControllers" *ngIf="myRol == 'Admin'">
    <section class="card-area" *ngFor="let robot of robothandle">
      <!-- Card: City -->
      <section class="card-section" *ngIf="robot.status != 'Off'">
        <div class="card">
          <div class="flip-card">
            <div class="flip-card__container">
              <div class="card-front">
                <div class="card-front__tp card-front__tp--city">
                  <img
                    *ngIf="robot.name == 'Toluca-Santos'"
                    src="../../../assets/Toluca.jpeg"
                    alt="En Funcionando"
                    class="myIcon"
                    draggable="false"
                    style="width: 80px; height: 80px"
                    ondragstart="return false;"
                  />
                  <img
                    *ngIf="robot.name == 'HospitalBochil'"
                    src="../../../assets/BOCHIL.png"
                    alt="En Funcionando"
                    class="myIcon"
                    draggable="false"
                    style="width: 80px; height: 80px"
                    ondragstart="return false;"
                  />
                  <img
                    *ngIf="robot.name == 'HospitalVillaFlores'"
                    src="../../../assets/Villaflores.png"
                    class="myIcon"
                    style="width: 80px; height: 80px"
                  />
                  <img
                    *ngIf="robot.name == 'Registro Civil 1'"
                    src="../../../assets/Civil.jpeg"
                    class="myIcon"
                    style="width: 80px; height: 80px"
                  />

                  <h2 class="card-front__heading">
                    <p>{{ robot.name }}</p>
                  </h2>
                  <!-- <p class="card-front__text-price">
                    {{ robot.limit }} - {{ robot.current }}
                  </p> -->
                  <p style="font-weight: 500">
                    {{ robot.status }} - {{ robot.system }}
                  </p>
                </div>

                <div class="card-front__bt">
                  <p class="card-front__text-view card-front__text-view--city">
                    {{ robot.limit }} - {{ robot.current }}
                  </p>
                </div>
              </div>
              <div class="card-back">
                <img
                  *ngIf="robot.name == 'Toluca-Santos'"
                  src="../../../assets/Toluca.jpeg"
                  alt="En Funcionando"
                  class="myIcon"
                  draggable="false"
                  style="width: 240px; height: 240px"
                  ondragstart="return false;"
                />
                <img
                  *ngIf="robot.name == 'HospitalBochil'"
                  src="../../../assets/BOCHIL.png"
                  alt="En Funcionando"
                  class="myIcon"
                  draggable="false"
                  style="width: 240px; height: 240px"
                  ondragstart="return false;"
                />
                <img
                  *ngIf="robot.name == 'HospitalVillaFlores'"
                  src="../../../assets/Villaflores.png"
                  class="myIcon"
                  style="width: 240px; height: 240px"
                />
                <img
                  *ngIf="robot.name == 'Registro Civil 1'"
                  src="../../../assets/Civil.jpeg"
                  class="myIcon"
                  style="width: 240px; height: 240px"
                />

                <!-- IMAGENES -->
                <div [ngSwitch]="robot.status">
                  <!-- <img
                      *ngSwitchCase="'Esperando Solicitudes'"
                      src="../../../assets/icons/shield.png"
                      alt="En Funcionando"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'Ok'"
                      src="../../../assets/icons/shield.png"
                      alt="En Funcionando"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'En espera'"
                      src="../../../assets/icons/caution.png"
                      alt="En Apagado"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'Off'"
                      src="../../../assets/icons/forbidden.png"
                      alt="En Espera"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    /> -->
                </div>
              </div>
            </div>
          </div>

          <div class="inside-page">
            <div class="inside-page__container">
              <h3 class="inside-page__heading inside-page__heading--city">
                <p>{{ robot.name }}</p>
              </h3>
              <p class="inside-page__text">
                <!-- BOTONES -->
              </p>

              <div class="myOptions">
                <ul class="list-group">
                  <li class="list-group-item active">Nueva Instrucción</li>

                  <ng-container *ngIf="robot.status != 'Off'">
                    <li
                      *ngIf="robot.system == 'sat'"
                      class="list-group-item myButtonList"
                      style="
                        cursor: pointer;
                        color: rgb(32, 32, 32);
                        user-select: none;
                      "
                    >
                      <fa-icon [icon]="faAddressCard"></fa-icon>&nbsp;Cambiar
                      Credenciales
                    </li>
                    <li
                      *ngIf="robot.system == 'sid'"
                      class="list-group-item myButtonList"
                      style="
                        cursor: pointer;
                        color: rgb(32, 32, 32);
                        user-select: none;
                      "
                      (click)="Instruction('changeAccessToken', robot)"
                    >
                      <fa-icon [icon]="faKey"></fa-icon>&nbsp;Cambiar Token
                    </li>
                  </ng-container>
                </ul>
              </div>

              <a class="inside-page__btn inside-page__btn--city"
                ><li
                  *ngIf="robot.status == 'Off'"
                  class="list-group-item myButtonList onSuccess"
                  style="
                    cursor: pointer;
                    color: rgb(25, 156, 25);
                    user-select: none;
                  "
                  (click)="Instruction('on', robot)"
                >
                  <fa-icon [icon]="faPowerOff"></fa-icon>&nbsp;Encender
                </li>
                <li
                  *ngIf="robot.status != 'Off'"
                  class="list-group-item myButtonList"
                  style="
                    cursor: pointer;
                    color: rgb(206, 50, 50);
                    user-select: none;
                  "
                  (click)="Instruction('off', robot)"
                >
                  <fa-icon [icon]="faPowerOff"></fa-icon>&nbsp;Apagar
                </li></a
              >
            </div>
          </div>
        </div>
      </section>
      <br />
      <section class="card-section" *ngIf="robot.status == 'Off'">
        <div class="card">
          <div class="flip-card">
            <div class="flip-card__container">
              <div class="card-front">
                <div class="card-front__tp card-front__tp--ski">
                  <img
                    *ngIf="robot.name == 'HospitalBochil'"
                    src="../../../assets/BOCHIL.png"
                    alt="En Funcionando"
                    class="myIcon"
                    draggable="false"
                    style="width: 80px; height: 80px"
                    ondragstart="return false;"
                  />
                  <img
                    *ngIf="robot.name == 'HospitalVillaFlores'"
                    src="../../../assets/Villaflores.png"
                    class="myIcon"
                    style="width: 80px; height: 80px"
                  />
                  <img
                    *ngIf="robot.name == 'Registro Civil 1'"
                    src="../../../assets/Civil.jpeg"
                    class="myIcon"
                    style="width: 80px; height: 80px"
                  />
                  <img
                    *ngIf="robot.name == 'Toluca-Santos'"
                    src="../../../assets/Toluca.jpeg"
                    alt="En Funcionando"
                    class="myIcon"
                    draggable="false"
                    style="width: 80px; height: 80px"
                    ondragstart="return false;"
                  />
                  <h2 class="card-front__heading">
                    <p>{{ robot.name }}</p>
                  </h2>

                  <p style="font-weight: 700">
                    {{ robot.status }} - {{ robot.system }}
                  </p>
                </div>

                <div class="card-front__bt">
                  <p class="card-front__text-view card-front__text-view--city">
                    {{ robot.limit }} - {{ robot.current }}
                  </p>
                </div>
              </div>
              <div class="card-back">
                <img
                  *ngIf="robot.name == 'Toluca-Santos'"
                  src="../../../assets/Toluca.jpeg"
                  alt="En Funcionando"
                  class="myIcon"
                  draggable="false"
                  style="width: 240px; height: 240px"
                  ondragstart="return false;"
                />
                <img
                  *ngIf="robot.name == 'HospitalBochil'"
                  src="../../../assets/BOCHIL.png"
                  alt="En Funcionando"
                  class="myIcon"
                  draggable="false"
                  style="width: 240px; height: 240px"
                  ondragstart="return false;"
                />
                <img
                  *ngIf="robot.name == 'HospitalVillaFlores'"
                  src="../../../assets/Villaflores.png"
                  class="myIcon"
                  style="width: 240px; height: 240px"
                />
                <img
                  *ngIf="robot.name == 'Registro Civil 1'"
                  src="../../../assets/Civil.jpeg"
                  class="myIcon"
                  style="width: 240px; height: 240px"
                />
                <!-- IMAGENES -->
                <!-- <div [ngSwitch]="robot.status">
                    <img
                      *ngSwitchCase="'Esperando Solicitudes'"
                      src="../../../assets/icons/shield.png"
                      alt="En Funcionando"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'Ok'"
                      src="../../../assets/icons/shield.png"
                      alt="En Funcionando"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'En espera'"
                      src="../../../assets/icons/caution.png"
                      alt="En Apagado"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                    <img
                      *ngSwitchCase="'Off'"
                      src="../../../assets/icons/forbidden.png"
                      alt="En Espera"
                      class="myIcon"
                      draggable="false"
                      ondragstart="return false;"
                    />
                  </div> -->
              </div>
            </div>
          </div>

          <div class="inside-page">
            <div class="inside-page__container">
              <h3 class="inside-page__heading inside-page__heading--city">
                <p>{{ robot.name }}</p>
              </h3>
              <p class="inside-page__text">
                <!-- BOTONES -->
              </p>

              <div class="myOptions">
                <ul class="list-group">
                  <li class="list-group-item active">Nueva Instrucción</li>

                  <ng-container *ngIf="robot.status != 'Off'">
                    <li
                      *ngIf="robot.system == 'sid' || robot.system == 'sat'"
                      class="list-group-item myButtonList"
                      style="
                        cursor: pointer;
                        color: rgb(32, 32, 32);
                        user-select: none;
                      "
                    >
                      <fa-icon [icon]="faAddressCard"></fa-icon>&nbsp;Cambiar
                      Credenciales
                    </li>
                    <li
                      *ngIf="robot.system == 'sid'"
                      class="list-group-item myButtonList"
                      style="
                        cursor: pointer;
                        color: rgb(32, 32, 32);
                        user-select: none;
                      "
                      (click)="Instruction('changeAccessToken', robot)"
                    >
                      <fa-icon [icon]="faKey"></fa-icon>&nbsp;Cambiar Token
                    </li>
                  </ng-container>
                </ul>
              </div>

              <a class="inside-page__btn inside-page__btn--city"
                ><li
                  *ngIf="robot.status == 'Off'"
                  class="list-group-item myButtonList"
                  style="
                    cursor: pointer;
                    color: rgb(25, 156, 25);
                    user-select: none;
                  "
                  (click)="Instruction('on', robot)"
                >
                  <fa-icon [icon]="faPowerOff"></fa-icon>&nbsp;Encender
                </li>
                <li
                  *ngIf="robot.status != 'Off'"
                  class="list-group-item myButtonList"
                  style="
                    cursor: pointer;
                    color: rgb(206, 50, 50);
                    user-select: none;
                  "
                  (click)="Instruction('off', robot)"
                >
                  <fa-icon [icon]="faPowerOff"></fa-icon>&nbsp;Apagar
                </li></a
              >
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>

  <div class="modalInput" id="modal" style="display: none">
    <div class="card2" id="changeToken" style="display: none">
      <div class="card2-header">
        <label for="card2-header">CAMBIAR TOKEN</label>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon2">Nuevo Token</span>
            <input
              [(ngModel)]="NewAccessToken"
              name="NewAccessToken"
              type="text"
              class="form-control"
              aria-label="Recipient's username"
              aria-describedby="basic-addon2"
            />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="myButtonOn" (click)="NextStep()">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              Enviar
            </div>
          </div>
          <div class="col">
            <div
              class="myButtonOn"
              (click)="CancelModal()"
              style="
                background: linear-gradient(
                  0deg,
                  rgb(115, 21, 21) 0%,
                  rgb(115, 21, 21) 50%,
                  rgb(126, 29, 29) 51%,
                  rgb(115, 21, 21) 100%
                );
              "
            >
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              Cancelar
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card2" id="confirmRequest" style="display: none">
      <div class="card2-header">
        <label for="card2-header">Confirmar</label>
      </div>
      <div class="card-body">
        <div class="row text-center">
          <div class="input-group mb-3">
            <span
              class="input-group-text"
              id="basic-addon2"
              style="text-align: center"
              >¿SEGURO QUE QUIERES ENVIAR LA PETICIÓN?</span
            >
          </div>
          <label for="row"> INSTRUCCION PARA {{ instruction[1]?.name }} </label>
        </div>
        <div class="row">
          <div class="col">
            <div class="myButtonOn" (click)="Send()">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              Si, enviar
            </div>
          </div>
          <div class="col">
            <div
              class="myButtonOn"
              (click)="CancelModal()"
              style="
                background: linear-gradient(
                  0deg,
                  rgb(115, 21, 21) 0%,
                  rgb(115, 21, 21) 50%,
                  rgb(126, 29, 29) 51%,
                  rgb(115, 21, 21) 100%
                );
              "
            >
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              Cancelar
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
